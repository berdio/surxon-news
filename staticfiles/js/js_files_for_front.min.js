jQuery(document).ready((function(){jQuery("#wp-admin-bar-tdb_template_builder_disabled a").click((function(e){e.preventDefault(),alert("Please select tagDiv Builder Template from the theme panel or set a default template. The current page/post uses a template that is not editable.")})),jQuery("#wp-admin-bar-new-tdb_templates").hide()}));var tdbMenu={};tdbMenu={items:[],item:function(){this.blockUid="",this._outsideClickArea=this._mainMenu=this._itemsWithSubmenu=null,this._outsideClickExcludedAreas="",this._openMenuClass="tdb-hover",this._openMenuBodyClass="tdb-open-menu",this._is_initialized=this.isMegaMenuParentPos=this.isMegaMenuFull=this.inComposer=!1},init:function(){tdbMenu.items=[]},_initialize_item:function(e){if(!0!==e._is_initialized){tdbMenu._setHover(e);var t=0<jQuery("."+e.blockUid+"_rand").parents(".td-header-template-wrap").length;window.tdb_globals.isAjax&&t||(e.isMegaMenuFull&&tdbMenu.megaMenuFull(e,e.inComposer),e.isMegaMenuParentPos&&tdbMenu.megaMenuParentPos(e,e.inComposer)),e._is_initialized=!0}},addItem:function(e){if(void 0===e.blockUid)throw"item.blockUid is not defined";tdbMenu.items.push(e),tdbMenu._initialize_item(e)},deleteItem:function(e){for(var t=0;t<tdbMenu.items.length;t++)if(tdbMenu.items[t].blockUid===e)return tdbMenu.items.splice(t,1),!0;return!1},megaMenuFull:function(e,t){function n(){o=a.find(".tdb-menu .tdb-mega-menu ul"),r=-i.left+"px",0<o.length&&o.attr("style","left:"+r+"; width: "+jQuery("body").outerWidth()+"px !important")}var i,s,r,o,a=e.jqueryObj;jQuery(window).resize((function(){setTimeout((function(){i=a.offset(),s=i.left,n(),t&&setInterval((function(){(i=a.offset()).left!==s&&(n(),s=i.left)}),1e3)}),500)})),jQuery(window).resize()},megaMenuParentPos:function(e,t){function n(){u.show(),u.each((function(){jQuery(this).css("left",""),r=jQuery(this).offset(),0>(o=r.left)?jQuery(this).offset({left:0}):0>jQuery(window).width()-(o+jQuery(this).outerWidth())&&jQuery(this).offset({left:jQuery(window).width()-jQuery(this).outerWidth()})})),u.hide()}var i,s,r,o,a=e.jqueryObj,u=a.find(".tdb-menu .tdb-mega-menu ul");setTimeout((function(){jQuery(window).resize((function(){i=a.offset(),s=i.left,n(),t&&setInterval((function(){(i=a.offset()).left!==s&&(n(),s=i.left)}),1e3)})),jQuery(window).resize()}),60)},_getSubmenuPosition:function(e){var t=jQuery(window).width();if(0<(e=e.children("ul").first()).length){var n=e.offset().left+e.width();n>t&&(e.parent().parent().hasClass("tdb-menu")?e.css("left","-"+(n-t)+"px"):e.addClass("reversed").css("left","-"+(e.width()+0)+"px"))}},_getMouseAngleDirection:function(e,t,n,i){return Math.atan2(n-e,i-t)/Math.PI*180},_setHover:function(e){var t=e.jqueryObj.find(".tdb-menu");t.supersubs({minWidth:10,maxWidth:20,extraWidth:1,applyMin:!0});var n=t.find(".menu-item-has-children > a, .tdb-mega-menu > a");if(n.parent().find("ul").first().css("display","none"),tdDetect.isTouchDevice)jQuery(document).on("touchstart","body",(function(t){var i=n.parent(),s=jQuery("body");s.hasClass(e._openMenuBodyClass)&&!i.is(t.target)&&0===i.has(t.target).length&&(i.removeClass(e._openMenuClass),i.children("ul").hide(),s.removeClass(e._openMenuBodyClass))})),n.on("touchstart",(function(t){t.preventDefault(),t.stopPropagation();var i=jQuery(this);t=i.parent();var s=jQuery("body");t.hasClass(e._openMenuClass)?null!==i.attr("href")&&"#"!==i.attr("href")?window.location.href=i.attr("href"):((t.parent().hasClass("tdb-menu")||t.parent().hasClass("top-header-menu"))&&s.removeClass(e._openMenuBodyClass),t.removeClass(e._openMenuClass),t.find("ul").hide(),t.find("li").removeClass(e._openMenuClass)):(t.parent().hasClass("tdb-menu")||t.parent().hasClass("top-header-menu")?(n.parent().removeClass(e._openMenuClass),n.parent().children("ul").hide()):((i=t.siblings()).removeClass(e._openMenuClass),i.find("ul").hide(),i.find("li").removeClass(e._openMenuClass)),t.addClass(e._openMenuClass),t.children("ul").show(),tdbMenu._getSubmenuPosition(t),s.addClass(e._openMenuBodyClass))}));else{var i,s={},r=!0;t.on("mouseleave",(function(){n.parent().removeClass(e._openMenuClass),n.parent().children("ul").hide(),s={}})),t.find(".menu-item").hover((function(){var t,o,a=jQuery(this),u="";if(a.hasClass("menu-item-has-children")||a.hasClass("tdb-mega-menu"))if(a.parent().hasClass("tdb-menu")){if(jQuery.isEmptyObject(s))a.addClass(e._openMenuClass),a.children("ul").show(),s=a;else if(a[0]!==s[0]){var d=o=t=0,l=null;!0===r&&(r=!1,i=setTimeout((function(){n.parent().removeClass(e._openMenuClass),n.parent().children("ul").hide(),a.addClass(e._openMenuClass),a.children("ul").show(),s=a}),400)),a.on("mousemove",(function(u){5<=t?(t=0,l=tdbMenu._getMouseAngleDirection(o,d,u.pageX,u.pageY),o=u.pageX,d=u.pageY):(t++,0===o&&0===d&&(o=u.pageX,d=u.pageY)),null!==l&&(85<l||-85>l)&&(n.parent().removeClass(e._openMenuClass),n.parent().children("ul").hide(),a.addClass(e._openMenuClass),a.children("ul").show(),a.off("mousemove"),clearTimeout(i),r=!0,s=a)}))}}else(u=a.siblings()).removeClass(e._openMenuClass),u.find("ul").hide(),u.find("li").removeClass(e._openMenuClass),a.addClass(e._openMenuClass),a.children("ul").show(),tdbMenu._getSubmenuPosition(a);else a.parent().hasClass("tdb-menu")?jQuery.isEmptyObject(s)||(d=o=t=0,l=null,!0===r&&(r=!1,i=setTimeout((function(){n.parent().removeClass(e._openMenuClass),n.parent().children("ul").hide(),s={}}),400)),a.on("mousemove",(function(u){5<=t?(t=0,l=tdbMenu._getMouseAngleDirection(o,d,u.pageX,u.pageY),o=u.pageX,d=u.pageY):(t++,0===o&&0===d&&(o=u.pageX,d=u.pageY)),null!==l&&(85<l||-85>l)&&(n.parent().removeClass(e._openMenuClass),n.parent().children("ul").hide(),a.off("mousemove"),clearTimeout(i),r=!0,s={})}))):(s=a.parent(),(u=a.siblings()).removeClass(e._openMenuClass),u.find("ul").hide(),u.find("li").removeClass(e._openMenuClass))}),(function(){var e=jQuery(this);!1===r&&(clearTimeout(i),r=!0),e.off("mousemove")}))}},unsetHover:function(e){null!==e._itemsWithSubmenu&&e._itemsWithSubmenu.off(),null!==e._outsideClickArea&&e._outsideClickArea.off()}};var tdbMenuItemPullDown={};tdbMenuItemPullDown={init:function(){setTimeout((function(){jQuery(".tdb-menu-items-pulldown").each((function(e,t){var n=jQuery(t),i=n.parent().attr("id"),s=jQuery("."+i+"_rand"),r="";if("none"!==s.css("max-width")&&(r=s.css("max-width")),s.hasClass("tdb-menu-items-in-more")){var o=n.find(".tdb-menu:first"),a=o.parents(".tdb-menu-items-pulldown:first"),u=[],d=new tdPullDown.item;if(void 0!==s.css("display")&&"inline-block"===s.css("display")){var l=s.closest(".vc_column_container");a=l,s="",s=0!==l.find(".tdc-elements").length?".tdc-elements":".wpb_wrapper",l.find(s+" > .td_block_wrap").each((function(){var e=.9*l.outerWidth(!0),t=jQuery(this).outerWidth(!0);if(jQuery(this).data("td-block-uid")!==i){if(!(t<e))return!1;u.push(jQuery(this))}}))}d.blockUid=i,d.horizontal_jquery_obj=o,d.vertical_jquery_obj=n.find(".tdb-menu-items-dropdown:first"),d.horizontal_element_css_class="tdb-menu-item-button",d.horizontal_no_items_css_class="tdb-menu-items-empty",d.container_jquery_obj=a,d.horizontal_max_width=r,d.excluded_jquery_elements=u,tdPullDown.add_item(d)}}))}),50)}},jQuery().ready((function(){tdbMenu.init()})),jQuery(window).load((function(){tdbMenuItemPullDown.init()}));var tdbSearch={};tdbSearch={items:[],init:function(){tdbSearch.items=[]},item:function(){this.jqueryObj=this.blockAtts=this.blockUid=void 0,this._is_search_open=!1,this._last_request_results_count=this._current_selection_index=0,this._first_down_up=!0,this._resultsLimit=void 0,this._openSearchFormClass="",this._is_initialized=this.isSearchFormFull=this.inComposer=!1},_initialize_item:function(e){if(!0!==e._is_initialized){jQuery(document).on("click",(function(t){jQuery("."+e.blockUid+"_rand .tdb-head-search-form-input").get(0)!==t.target&&!0===e._is_search_open&&tdbSearch.hide_search_box(e)})),e.jqueryObj.find(".tdb-head-search-btn").on("click",(function(t){t.preventDefault(),t.stopPropagation(),!0===e._is_search_open?tdbSearch.hide_search_box(e):tdbSearch.show_search_box(e)})),e.jqueryObj.find(".tdb-head-search-form-input").keydown((function(t){if(!(t.which&&39===t.which||t.keyCode&&39===t.keyCode||t.which&&37===t.which||t.keyCode&&37===t.keyCode))return t.which&&13===t.which||t.keyCode&&13===t.keyCode?(0<(t=e.jqueryObj.find(".tdb-aj-cur-element")).length?window.location=t.find(".entry-title a").attr("href"):jQuery(this).parent().parent().submit(),!1):t.which&&40===t.which||t.keyCode&&40===t.keyCode?(tdbSearch.move_prompt_down(e),!1):t.which&&38===t.which||t.keyCode&&38===t.keyCode?(tdbSearch.move_prompt_up(e),!1):((t.which&&8===t.which||t.keyCode&&8===t.keyCode)&&1===jQuery(this).val().length&&e.jqueryObj.find(".tdb-aj-search").empty(),tdbSearch.set_input_focus(e),setTimeout((function(){tdbSearch.do_ajax_call(e)}),100),!0);tdbSearch.set_input_focus(e)}));var t=0<jQuery("."+e.blockUid+"_rand").parents(".td-header-template-wrap").length;window.tdb_globals.isAjax&&t||(e.isSearchFormFull?tdbSearch.searchFormWidth(e,!0,e.inComposer):tdbSearch.searchFormWidth(e,!1,e.inComposer)),e._is_initialized=!0}},addItem:function(e){if(void 0===e.blockUid)throw"item.blockUid is not defined";tdbSearch.items.push(e),tdbSearch._initialize_item(e)},deleteItem:function(e){for(var t=0;t<tdbSearch.items.length;t++)if(tdbSearch.items[t].blockUid===e)return tdbSearch.items.splice(t,1),!0;return!1},searchFormWidth:function(e,t,n){function i(){o=-s.left+"px",u.attr("style",u.attr("style")+";left:"+o)}var s,r,o,a=e.jqueryObj,u=a.find(".tdb-drop-down-search");jQuery(window).resize((function(){u.attr("style","width: "+jQuery("body").outerWidth()+"px !important"),t&&setTimeout((function(){s=a.offset(),r=s.left,i(),n&&setInterval((function(){(s=a.offset()).left!==r&&(i(),r=s.left)}),1e3)}),500)})),jQuery(window).resize()},show_search_box:function(e){e.jqueryObj.find(".tdb-drop-down-search").addClass(e._openSearchFormClass),!0!==tdDetect.isIos&&setTimeout((function(){document.querySelector("."+e.blockUid+"_rand .tdb-head-search-form-input").focus()}),200),e._is_search_open=!0},hide_search_box:function(e){e.jqueryObj.find(".tdb-drop-down-search").removeClass(e._openSearchFormClass),e._is_search_open=!1},move_prompt_up:function(e){!0===e._first_down_up?(e._first_down_up=!1,0===e._current_selection_index?e._current_selection_index=e._last_request_results_count-1:e._current_selection_index--):0===e._current_selection_index?e._current_selection_index=e._last_request_results_count:e._current_selection_index--,tdbSearch._repaintCurrentElement(e)},move_prompt_down:function(e){!0===e._first_down_up?e._first_down_up=!1:e._current_selection_index===e._last_request_results_count?e._current_selection_index=0:e._current_selection_index++,tdbSearch._repaintCurrentElement(e)},set_input_focus:function(e){e._current_selection_index=0,e._first_down_up=!0,e.jqueryObj.find(".tdb-search-form").fadeTo(100,1),e.jqueryObj.find(".td_module_wrap").removeClass("tdb-aj-cur-element")},remove_input_focus:function(e){0!==e._last_request_results_count&&e.jqueryObj.find(".tdb-head-search-form-input").addClass("tdb-head-search-nofocus")},_repaintCurrentElement:function(e){e.jqueryObj.find(".td_module_wrap").removeClass("tdb-aj-cur-element"),e._current_selection_index>e._last_request_results_count-1?(e.jqueryObj.find(".tdb-search-form").fadeTo(100,1),e.jqueryObj.find(".tdb-head-search-form-input").removeClass("tdb-head-search-nofocus")):(tdbSearch.remove_input_focus(e),e.jqueryObj.find(".td_module_wrap").eq(e._current_selection_index).addClass("tdb-aj-cur-element"))},do_ajax_call:function(e){var t=e.jqueryObj.find(".tdb-head-search-form-input").val();""===t?tdbSearch.set_input_focus(e):tdLocalCache.exist("tdb-"+t)?tdbSearch.process_ajax_response(tdLocalCache.get("tdb-"+t),e):jQuery.ajax({type:"POST",url:td_ajax_url,data:{action:"td_ajax_search",module:"tdb_module_search",atts:e.blockAtts,td_string:t,limit:e._resultsLimit},success:function(n,i,s){tdLocalCache.set("tdb-"+t,n),tdbSearch.process_ajax_response(n,e)},error:function(e,t,n){window.console.log(n)}})},process_ajax_response:function(e,t){var n=t.jqueryObj.find(".tdb-head-search-form-input").val(),i=t.jqueryObj.find(".tdb-aj-search");if(""===n)i.empty();else{var s=jQuery.parseJSON(e);s.td_search_query===n&&(t._current_selection_index=0,t._last_request_results_count=s.td_total_in_list,t._first_down_up=!0,i.html(s.td_data),void 0!==window.tdAnimationStack&&!0===window.tdAnimationStack.activated&&(window.tdAnimationStack.check_for_new_items(".tdb-aj-search .td-animation-stack",window.tdAnimationStack.SORTED_METHOD.sort_left_to_right,!0,!1),window.tdAnimationStack.compute_items(!1)))}},hideAllItems:function(){tdbSearch.items.forEach((function(e){tdbSearch.hide_search_box(e)}))}},jQuery().ready((function(){tdbSearch.init()}));